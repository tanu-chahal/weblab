<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Force Dark Mode Test</title>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #333333;
            --card-bg: #f8f9fa;
            --border-color: #e0e0e0;
            --accent-color: #007acc;
            --secondary-bg: #f5f5f5;
            --shadow: rgba(0, 0, 0, 0.1);
        }
        
        /* Dark mode styles */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #121212;
                --text-color: #e0e0e0;
                --card-bg: #1e1e1e;
                --border-color: #333333;
                --accent-color: #4fa8da;
                --secondary-bg: #2d2d2d;
                --shadow: rgba(0, 0, 0, 0.3);
            }
        }
        
        /* Manual dark mode override */
        .manual-dark-mode {
            --bg-color: #121212 !important;
            --text-color: #e0e0e0 !important;
            --card-bg: #1e1e1e !important;
            --border-color: #333333 !important;
            --accent-color: #4fa8da !important;
            --secondary-bg: #2d2d2d !important;
            --shadow: rgba(0, 0, 0, 0.3) !important;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--accent-color);
        }
        
        h2 {
            color: var(--accent-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        .instructions {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 10px var(--shadow);
        }
        
        .command-example {
            background: var(--secondary-bg);
            padding: 15px;
            border-radius: 5px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            margin: 10px 0;
            border-left: 4px solid var(--accent-color);
            overflow-x: auto;
        }
        
        .test-section {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 10px var(--shadow);
        }
        
        .theme-toggle {
            text-align: center;
            margin: 20px 0;
        }
        
        .toggle-button {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        
        .toggle-button:hover {
            background: #0056b3;
        }
        
        .color-samples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .color-card {
            background: var(--secondary-bg);
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .color-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px var(--shadow);
        }
        
        .content-example {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .content-example {
                grid-template-columns: 1fr;
            }
        }
        
        .article-card {
            background: var(--secondary-bg);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .article-card h3 {
            margin-top: 0;
            color: var(--accent-color);
        }
        
        .image-placeholder {
            width: 100%;
            height: 120px;
            background: linear-gradient(45deg, var(--accent-color), #6c757d);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .navigation {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }
        
        .nav-links {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .nav-link {
            color: var(--accent-color);
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 4px;
            border: 1px solid var(--accent-color);
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            background: var(--accent-color);
            color: white;
        }
        
        .form-example {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        input, textarea, select {
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background: var(--card-bg);
            color: var(--text-color);
            font-family: inherit;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(79, 168, 218, 0.2);
        }
        
        .status-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin: 5px;
        }
        
        .status-light {
            background: #d4edda;
            color: #155724;
        }
        
        .status-dark {
            background: #2d5a2d;
            color: #b8e6b8;
        }
        
        .theme-info {
            background: var(--secondary-bg);
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-color);
        }
        
        .detection-results {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåô Force Dark Mode Test</h1>
        
        <div class="instructions">
            <h2>How to Test Force Dark Mode</h2>
            <p>To test the <code>--force-dark-mode</code> flag, launch Chrome with this parameter:</p>
            
            <div class="command-example">
                # Close all Chrome instances first, then run:<br>
                chrome --force-dark-mode<br><br>
                
                # Or with additional flags:<br>
                chrome --force-dark-mode --enable-features=WebUIDarkMode<br><br>
                
                # For testing on specific sites:<br>
                chrome --force-dark-mode --force-dark-mode-policy=force
            </div>
            
            <p><strong>What this does:</strong> Forces Chrome's UI and websites that support dark themes to display in dark mode, regardless of system preferences.</p>
        </div>
        
        <div class="navigation">
            <div class="nav-links">
                <a href="#" class="nav-link">Home</a>
                <a href="#" class="nav-link">About</a>
                <a href="#" class="nav-link">Services</a>
                <a href="#" class="nav-link">Portfolio</a>
                <a href="#" class="nav-link">Contact</a>
            </div>
        </div>
        
        <div class="theme-toggle">
            <button class="toggle-button" onclick="toggleManualTheme()">
                Toggle Manual Dark Mode
            </button>
            <p><em>This button toggles CSS dark mode manually for comparison</em></p>
        </div>
        
        <div class="test-section">
            <h2>Theme Detection Results</h2>
            <div id="theme-detection" class="detection-results">
                <p>Loading theme detection...</p>
            </div>
        </div>
        
        <div class="test-section">
            <h2>Visual Elements Test</h2>
            <p>These elements should automatically adapt to dark mode when the flag is active:</p>
            
            <div class="color-samples">
                <div class="color-card">
                    <h4>Text Colors</h4>
                    <p>Primary text should be light in dark mode</p>
                </div>
                <div class="color-card">
                    <h4>Background</h4>
                    <p>Background should be dark</p>
                </div>
                <div class="color-card">
                    <h4>Accent Colors</h4>
                    <p style="color: var(--accent-color);">Links and highlights</p>
                </div>
                <div class="color-card">
                    <h4>Borders</h4>
                    <p>Subtle border colors</p>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>Content Examples</h2>
            <div class="content-example">
                <div class="article-card">
                    <h3>Article Title</h3>
                    <div class="image-placeholder">Image Placeholder</div>
                    <p>This is sample article content that should be readable in both light and dark modes. The text should have sufficient contrast against the background.</p>
                    <div class="status-indicator status-light">Light Theme Status</div>
                    <div class="status-indicator status-dark">Dark Theme Status</div>
                </div>
                
                <div class="article-card">
                    <h3>Another Article</h3>
                    <div class="image-placeholder">Another Image</div>
                    <p>More sample content to demonstrate how the dark mode flag affects various text elements and backgrounds throughout the page.</p>
                    <a href="#" style="color: var(--accent-color);">Sample Link</a>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>Form Elements</h2>
            <p>Form elements should also adapt to dark mode:</p>
            
            <div class="form-example">
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" id="name" placeholder="Enter your name">
                </div>
                
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" placeholder="Enter your email">
                </div>
                
                <div class="form-group">
                    <label for="theme-preference">Theme Preference:</label>
                    <select id="theme-preference">
                        <option value="auto">Auto (System)</option>
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="message">Message:</label>
                    <textarea id="message" rows="4" placeholder="Enter your message"></textarea>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>Expected Behavior</h2>
            <div class="theme-info">
                <h3>With --force-dark-mode flag:</h3>
                <ul>
                    <li>‚úÖ Chrome's UI (tabs, address bar, menus) should be dark</li>
                    <li>‚úÖ This webpage should display in dark mode</li>
                    <li>‚úÖ CSS <code>prefers-color-scheme: dark</code> should be active</li>
                    <li>‚úÖ Form elements should have dark styling</li>
                    <li>‚úÖ Text should be light on dark backgrounds</li>
                </ul>
            </div>
            
            <div class="theme-info">
                <h3>Without the flag:</h3>
                <ul>
                    <li>üåû Display follows system theme preference</li>
                    <li>üåû Light mode by default on most systems</li>
                    <li>üåû Manual toggle still works via CSS</li>
                </ul>
            </div>
        </div>
        
        <div class="test-section">
            <h2>System Theme Status</h2>
            <div id="system-theme-info" class="detection-results">
                <p>Checking system theme...</p>
            </div>
        </div>
    </div>
    
    <script>
        let manualDarkMode = false;
        
        function toggleManualTheme() {
            manualDarkMode = !manualDarkMode;
            const body = document.body;
            const button = document.querySelector('.toggle-button');
            
            if (manualDarkMode) {
                body.classList.add('manual-dark-mode');
                button.textContent = 'Switch to Light Mode';
            } else {
                body.classList.remove('manual-dark-mode');
                button.textContent = 'Toggle Manual Dark Mode';
            }
            
            updateThemeDetection();
        }
        
        function updateThemeDetection() {
            const detectionDiv = document.getElementById('theme-detection');
            const systemDiv = document.getElementById('system-theme-info');
            
            // Check media query for dark mode
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
            
            // Get computed styles
            const computedStyle = getComputedStyle(document.documentElement);
            const currentBg = computedStyle.getPropertyValue('--bg-color').trim();
            const currentText = computedStyle.getPropertyValue('--text-color').trim();
            
            let detectionHTML = '<h3>Current Theme Detection:</h3>';
            detectionHTML += '<ul>';
            detectionHTML += `<li><strong>prefers-color-scheme: dark:</strong> ${prefersDark ? '‚úÖ Active' : '‚ùå Inactive'}</li>`;
            detectionHTML += `<li><strong>prefers-color-scheme: light:</strong> ${prefersLight ? '‚úÖ Active' : '‚ùå Inactive'}</li>`;
            detectionHTML += `<li><strong>Manual override:</strong> ${manualDarkMode ? 'üîß Dark' : 'üîß None'}</li>`;
            detectionHTML += `<li><strong>Current background:</strong> <code>${currentBg}</code></li>`;
            detectionHTML += `<li><strong>Current text color:</strong> <code>${currentText}</code></li>`;
            detectionHTML += '</ul>';
            
            // Check if background is dark
            const isDarkBackground = currentBg === '#121212' || currentBg === 'rgb(18, 18, 18)';
            const hasManualClass = document.body.classList.contains('manual-dark-mode');
            detectionHTML += `<p><strong>Detected mode:</strong> ${isDarkBackground ? 'üåô Dark Mode' : '‚òÄÔ∏è Light Mode'}</p>`;
            if (hasManualClass) {
                detectionHTML += `<p><strong>Manual override:</strong> üîß Manual dark mode is active</p>`;
            }
            
            detectionDiv.innerHTML = detectionHTML;
            
            // System theme info
            let systemHTML = '<h3>System & Browser Info:</h3>';
            systemHTML += '<ul>';
            systemHTML += `<li><strong>User Agent:</strong> ${navigator.userAgent.includes('Chrome') ? '‚úÖ Chrome' : '‚ùì Other'}</li>`;
            systemHTML += `<li><strong>Color Depth:</strong> ${screen.colorDepth} bits</li>`;
            
            // Check for dark mode support
            if (CSS.supports('color-scheme', 'dark')) {
                systemHTML += '<li><strong>CSS color-scheme support:</strong> ‚úÖ Supported</li>';
            } else {
                systemHTML += '<li><strong>CSS color-scheme support:</strong> ‚ùå Not supported</li>';
            }
            
            systemHTML += '</ul>';
            
            // Force dark mode detection hint
            if (prefersDark && !manualDarkMode) {
                systemHTML += '<div style="background: #1a472a; color: #4ade80; padding: 10px; border-radius: 5px; margin-top: 10px;">';
                systemHTML += '<strong>üéØ Force Dark Mode Active!</strong> The browser is reporting dark mode preference, which suggests the --force-dark-mode flag is working.';
                systemHTML += '</div>';
            } else if (!prefersDark && !manualDarkMode) {
                systemHTML += '<div style="background: #451a03; color: #fed7aa; padding: 10px; border-radius: 5px; margin-top: 10px;">';
                systemHTML += '<strong>üí° Test the Flag:</strong> Launch Chrome with --force-dark-mode to see the difference!';
                systemHTML += '</div>';
            }
            
            systemDiv.innerHTML = systemHTML;
        }
        
        // Listen for theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateThemeDetection);
        
        // Initial detection
        document.addEventListener('DOMContentLoaded', updateThemeDetection);
        
        // Update every few seconds to catch changes
        setInterval(updateThemeDetection, 3000);
    </script>
</body>
</html>